;======================================================================================================================================================
include 'KP580BB55_inc.inc'
;======================================================================================================================================================
public Write_KP580BB55,Read_KP580BB55
;======================================================================================================================================================
KP580BB55_code segment code
rseg KP580BB55_code
;======================================================================================================================================================
; Change to macro with parameters
;Init_KP580BB55:
;   _KP580BB55_write_byte RUS,#10000000b ; Иницилизируем нужный режим
    ;                          ||||||||
    ;                          |||||||+---- PС0-PC3 (0 - output, 1 - input)
    ;                          ||||||+----- PВ0-PВ7 (0 - output, 1 - input)
    ;                          |||||+------ Mode PВ0-PВ7 & PС0-PC3 (0 - Mode0, 1 - Mode1)
    ;                          ||||+------- PС4-PC7 (0 - output, 1 - input)
    ;                          |||+-------- PА0-PА7 (0 - output, 1 - input)
    ;                          |++ -------- Mode PА0-PА7 & PС4-PC7 (00 - Mode0, 01 - Mode1, 10 - Mode2)
    ;                          +----------- Mode set flag (1 - Mode set, 0 - set/clear PortC bits). If 0, D3-D1 - bit number PС, D0 - bit value
;   ret
;======================================================================================================================================================
Write_KP580BB55:
if USE_KP580BB55_CS
    clr KP580BB55_CS_PIN
endif
    movx @R0,A
if USE_KP580BB55_CS
    setb KP580BB55_CS_PIN
endif
    ret
;------------------------------------------------------------------------------------------------------------------------------------------------------
Read_KP580BB55:
if USE_KP580BB55_CS
    clr  KP580BB55_CS_PIN
endif
    movx A,@R0
if USE_KP580BB55_CS
    setb KP580BB55_CS_PIN
endif
    ret
;======================================================================================================================================================
end