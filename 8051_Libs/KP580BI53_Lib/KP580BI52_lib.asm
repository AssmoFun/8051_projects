;======================================================================================================================================================
include 'KP580BI53_inc.inc'
;======================================================================================================================================================
public Write_KP580BI53,Read_KP580BI53
;======================================================================================================================================================
KP580BI53_code segment code
rseg KP580BI53_code
;======================================================================================================================================================
; replaced by a macro with parameters
;Init_KP580BI53:
;    _KP580BI53_write_byte CWR,#10000000b ; channel initialization 
    ;                          ||||||||
    ;                          |||||||+--- BCD (0 - binary, 1 - BCD)
    ;                          ||||+++---- M - Mode (000 - Mode0, 001 - Mode1, 010 - Mode2, 011 - Mode3, 100 - Mode4, 101 - Mode5)
    ;                          ||++------- RL1,RL0 - Read/Load Byte (00 - Counter Latching operation, 01 - read/write low byte, 10 - read/write high byte, 11 - read/write word (low byte first))
    ;                          ++--------- SC1,SC0 - Select Counter (00 - Select Counter0, 01 - Select Counter1, 10 - Select Counter2, 11 - illegal)
;    ret
;======================================================================================================================================================
Write_KP580BI53:
if USE_KP580BI53_CS
    clr  KP580BB55_CS_PIN
endif
    movx @R0,A
if USE_KP580BI53_CS
    setb KP580BB55_CS_PIN
endif
    ret
;------------------------------------------------------------------------------------------------------------------------------------------------------
Read_KP580BI53:
if USE_KP580BI53_CS
    clr  KP580BI53_CS_PIN
endif
    movx A,@R0
if USE_KP580BI53_CS
    setb KP580BI53_CS_PIN
endif
    ret
;======================================================================================================================================================
end